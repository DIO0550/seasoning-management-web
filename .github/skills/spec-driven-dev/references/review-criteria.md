# Review Criteria

Codexレビュー時の観点と判断基準。

## 1. 仕様の曖昧さ・抜け漏れ

### チェック項目

- [ ] 目的が明確に記述されているか
- [ ] 各ファイルの責務が明確か
- [ ] Props/パラメータの型・制約が定義されているか
- [ ] 状態管理の方針が明確か
- [ ] データフローが理解できるか

### NG例

```markdown
❌ "適切なスタイルを適用"
✅ "Tailwind CSSでbg-blue-600, hover:bg-blue-700を適用"

❌ "必要に応じてエラー処理"
✅ "API失敗時はトースト通知を表示し、3回までリトライ"
```

## 2. 実装可能性

### チェック項目

- [ ] 使用ライブラリ/APIは存在するか
- [ ] 依存関係に矛盾はないか
- [ ] 技術的に実現可能な設計か
- [ ] 既存コードとの整合性はあるか
- [ ] 必要な権限・アクセスは確保できるか

### NG例

```markdown
❌ 存在しないAPIエンドポイントを前提
❌ 非推奨のライブラリを使用
❌ 循環依存が発生する構造
```

## 3. エッジケースの考慮

### チェック項目

- [ ] 空データ/nullの処理
- [ ] 境界値（0, 負数, 最大値）
- [ ] ネットワークエラー/タイムアウト
- [ ] 同時実行/競合状態
- [ ] ユーザーの予期しない操作

### 必須考慮パターン

| ケース | 対応 |
|--------|------|
| データなし | 空状態UIを表示 |
| 読み込み中 | ローディング表示 |
| エラー発生 | エラーメッセージ + リトライ |
| 権限なし | 適切なフィードバック |

## 4. ファイル構成の妥当性

### チェック項目

- [ ] 単一責任の原則に従っているか
- [ ] ファイル数が適切か（多すぎ/少なすぎ）
- [ ] 命名規則に従っているか
- [ ] ディレクトリ構造が既存と一貫しているか
- [ ] 再利用性が考慮されているか

### 推奨構成例

```
components/
└── Button/
    ├── index.tsx        # メインコンポーネント
    ├── Button.stories.tsx  # Storybook
    └── Button.test.tsx     # テスト（必要時）
```

## 5. アーキテクチャとの整合性

### チェック項目

- [ ] 既存の設計パターンに従っているか
- [ ] 状態管理の方針と一致しているか
- [ ] API設計の規約に従っているか
- [ ] セキュリティ要件を満たしているか
- [ ] パフォーマンス要件を満たしているか

### 確認すべきドキュメント

1. プロジェクトのREADME
2. ARCHITECTURE.md（あれば）
3. 既存の類似コンポーネント
4. コーディング規約

## Codexへのプロンプトテンプレート

```
以下の実装計画をレビューしてください。

## レビュー観点

1. **仕様の曖昧さ**: 目的・責務・データフローが明確か
2. **実装可能性**: 技術的に実現可能か、依存関係に問題ないか
3. **エッジケース**: 空データ、エラー、境界値を考慮しているか
4. **ファイル構成**: 単一責任、命名規則、再利用性は適切か
5. **アーキテクチャ整合性**: 既存設計パターンと一致しているか

## 回答形式

問題がなければ「問題なし」と回答。
問題があれば以下の形式で指摘:

### 指摘1: [観点名]
- **問題**: 具体的な問題点
- **改善案**: 具体的な修正提案

---

{implementation-plan.mdの内容}
```

## レビュー結果の解釈

### 「問題なし」の場合

→ Step 4（tasks.md生成）へ進む

### 問題指摘がある場合

1. 各指摘を分類（Critical / Warning / Suggestion）
2. Critical: 必ず修正
3. Warning: 基本的に修正
4. Suggestion: 判断して対応
5. 修正後、再レビュー

### ループ上限

- 最大5回のレビューループ
- 5回超えたらユーザーに相談
