---
applyTo: "**.ts | **.tsx | **.js | **.jsx"
---

# TypeScript コメントガイドライン

## 基本方針

**「コードは自己文書化されるべき」** - 必要最小限のコメントのみを記述し、冗長なコメントは避ける。

## コメントが必要な場合

### 1. API/公開インターフェースのドキュメント

```typescript
/**
 * ユーザー認証を行い、JWTトークンを返す
 * @param email - ユーザーのメールアドレス
 * @param password - パスワード
 * @returns JWTトークン
 * @throws AuthError 認証に失敗した場合
 */
async function authenticateUser(
  email: string,
  password: string
): Promise<string>;
```

### 2. 複雑なビジネスロジックや実装意図の説明

```typescript
// 在庫計算では予約中商品も考慮する必要がある
// 予約から24時間経過した商品は自動的に在庫に戻される
const availableStock = totalStock - reservedStock + expiredReservations;
```

### 3. 外部仕様や制約による実装

### 4. パフォーマンス最適化の理由

### 5. 型では表現できない制約や仕様

## コメントが不要な場合

- 明らかな処理の説明
- 変数名や関数名で理解できる内容
- 標準的な実装パターン
- コード構造の説明
- 型で十分に表現されている内容

## 良いコメントの特徴

- **Why（なぜ）** を説明する - What ではなく
- **簡潔で具体的** - 冗長な説明を避ける
- **メンテナンスされる** - コード変更時に更新される
- **型システムを補完** - 型だけでは伝わらない情報

## チェックリスト

コメントを書く前に以下を確認：

- [ ] 型定義で十分に説明されていないか？
- [ ] コード自体で理解できないか？
- [ ] 変数名や関数名を改善すれば不要にならないか？
- [ ] 将来の開発者が混乱する可能性があるか？
- [ ] ビジネス要件や外部制約が関係しているか？

**原則: 型システム + コードの可読性向上を優先し、コメントは最小限に**
